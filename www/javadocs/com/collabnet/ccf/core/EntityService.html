<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_03) on Mon Oct 27 13:11:12 PDT 2008 -->
<TITLE>
EntityService
</TITLE>

<META NAME="date" CONTENT="2008-10-27">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="EntityService";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/EntityService.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/collabnet/ccf/core/CCFRuntimeException.html" title="class in com.collabnet.ccf.core"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/collabnet/ccf/core/RepositoryRecord.html" title="class in com.collabnet.ccf.core"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/collabnet/ccf/core/EntityService.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="EntityService.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.collabnet.ccf.core</FONT>
<BR>
Class EntityService</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by ">org.openadaptor.core.Component
      <IMG SRC="../../../../resources/inherit.gif" ALT="extended by ">org.openadaptor.core.lifecycle.LifecycleComponent
          <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>com.collabnet.ccf.core.EntityService</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>org.openadaptor.core.IComponent, org.openadaptor.core.IDataProcessor, org.openadaptor.core.jmx.Administrable, org.openadaptor.core.lifecycle.ILifecycleComponent</DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>EntityService</B><DT>extends org.openadaptor.core.lifecycle.LifecycleComponent<DT>implements org.openadaptor.core.IDataProcessor</DL>
</PRE>

<P>
This component will find out whether an artifact coming out of the source
 system has to be created, updated, deleted or ignored within the target
 system. It will also try to find out the correct id of the artifact on the
 target system.
 
 It checks the version of the source artifact to see if that version of the
 artifact already shipped there by avoiding duplicate artifact shipment.
 
 Optionally, it can also find out whether the artifact has been quarantined in
 the hospital and skip it.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>jnicolai</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#hospitalDatabaseReader">hospitalDatabaseReader</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#identityMappingDatabaseReader">identityMappingDatabaseReader</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;org.apache.commons.logging.Log</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#log">log</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log4j logger instance</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#skipNewerVersionsOfQuarantinedAttachments">skipNewerVersionsOfQuarantinedAttachments</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.openadaptor.core.IDataProcessor"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from interface org.openadaptor.core.IDataProcessor</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>NULL_PROCESSOR</CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#EntityService()">EntityService</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#getHospitalDatabaseReader()">getHospitalDatabaseReader</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the (optional) data base reader that is used to find out whether the
 artifact is currently quarantined in the hospital and has not been
 reprocessed yet.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#getIdentityMappingDatabaseReader()">getIdentityMappingDatabaseReader</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the (mandatory) data base reader that is used to retrieve the target
 artifact id from the the identity mapping table.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#isSkipNewerVersionsOfQuarantinedArtifacts()">isSkipNewerVersionsOfQuarantinedArtifacts</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This optional property (default value false) determines whether
 non-reprocessed artifacts in the hospital should be skipped even if a
 newer version of the artifact is available in the source system.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.Object[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#lookupTargetArtifact(org.dom4j.Element, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)">lookupTargetArtifact</A></B>(org.dom4j.Element&nbsp;element,
                     java.lang.String&nbsp;sourceArtifactId,
                     java.lang.String&nbsp;sourceSystemId,
                     java.lang.String&nbsp;sourceRepositoryId,
                     java.lang.String&nbsp;targetSystemId,
                     java.lang.String&nbsp;targetRepositoryId,
                     java.lang.String&nbsp;artifactType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For a given source artifact id, source repository and the target
 repository details, this method finds out the target artifact id mapped
 to the source artifact id by looking up the identity mapping table.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.Object[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#process(java.lang.Object)">process</A></B>(java.lang.Object&nbsp;data)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;openAdaptor Method to process all input and puts out the results This
 method will only handle Dom4J documents encoded in the generic XML schema</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.Object[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#processXMLDocument(org.dom4j.Document)">processXMLDocument</A></B>(org.dom4j.Document&nbsp;data)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Main method to handle the mapping and filtering of source artifacts to
 target repository artifact items Also include the quarantined artifact
 lookup code</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#reset(java.lang.Object)">reset</A></B>(java.lang.Object&nbsp;context)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reset the processor</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#setHospitalDatabaseReader(org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector)">setHospitalDatabaseReader</A></B>(org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector&nbsp;hospitalDatabaseReader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the (optional) data base reader that is used to find out whether the
 artifact is currently quarantined in the hospital and has not been
 reprocessed yet.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#setIdentityMappingDatabaseReader(org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector)">setIdentityMappingDatabaseReader</A></B>(org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector&nbsp;identityMappingDatabaseReader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the (mandatory) data base reader that is used to retrieve the target
 artifact id from the the identity mapping table.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#setSkipNewerVersionsOfQuarantinedArtifacts(boolean)">setSkipNewerVersionsOfQuarantinedArtifacts</A></B>(boolean&nbsp;skipNewerVersionsOfQuarantinedAttachments)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This optional property (default value false) determines whether
 non-reprocessed artifacts in the hospital should be skipped even if a
 newer version of the artifact is available in the source system.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#skipQuarantinedArtifact(org.dom4j.Element, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Date, int)">skipQuarantinedArtifact</A></B>(org.dom4j.Element&nbsp;element,
                        java.lang.String&nbsp;sourceArtifactId,
                        java.lang.String&nbsp;sourceSystemId,
                        java.lang.String&nbsp;sourceRepositoryId,
                        java.lang.String&nbsp;targetSystemId,
                        java.lang.String&nbsp;targetRepositoryId,
                        java.lang.String&nbsp;artifactType,
                        java.util.Date&nbsp;sourceArtifactLastModifiedDate,
                        int&nbsp;sourceArtifactVersionInt)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method looks up whether the artifact has been quarantined in the
 hospital and has not been reprocessed yet.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/collabnet/ccf/core/EntityService.html#validate(java.util.List)">validate</A></B>(java.util.List&nbsp;exceptions)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.openadaptor.core.lifecycle.LifecycleComponent"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.openadaptor.core.lifecycle.LifecycleComponent</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>addListener, getAdmin, getState, isState, removeListener, setState, start, stop, waitForState</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.openadaptor.core.Component"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.openadaptor.core.Component</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>getId, setId, toString</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.openadaptor.core.IComponent"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface org.openadaptor.core.IComponent</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>getId, setId</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="log"><!-- --></A><H3>
log</H3>
<PRE>
private static final org.apache.commons.logging.Log <B>log</B></PRE>
<DL>
<DD>log4j logger instance
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="identityMappingDatabaseReader"><!-- --></A><H3>
identityMappingDatabaseReader</H3>
<PRE>
private org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector <B>identityMappingDatabaseReader</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="hospitalDatabaseReader"><!-- --></A><H3>
hospitalDatabaseReader</H3>
<PRE>
private org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector <B>hospitalDatabaseReader</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="skipNewerVersionsOfQuarantinedAttachments"><!-- --></A><H3>
skipNewerVersionsOfQuarantinedAttachments</H3>
<PRE>
private boolean <B>skipNewerVersionsOfQuarantinedAttachments</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="EntityService()"><!-- --></A><H3>
EntityService</H3>
<PRE>
public <B>EntityService</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="process(java.lang.Object)"><!-- --></A><H3>
process</H3>
<PRE>
public java.lang.Object[] <B>process</B>(java.lang.Object&nbsp;data)</PRE>
<DL>
<DD>openAdaptor Method to process all input and puts out the results This
 method will only handle Dom4J documents encoded in the generic XML schema
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>process</CODE> in interface <CODE>org.openadaptor.core.IDataProcessor</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="processXMLDocument(org.dom4j.Document)"><!-- --></A><H3>
processXMLDocument</H3>
<PRE>
private java.lang.Object[] <B>processXMLDocument</B>(org.dom4j.Document&nbsp;data)</PRE>
<DL>
<DD>Main method to handle the mapping and filtering of source artifacts to
 target repository artifact items Also include the quarantined artifact
 lookup code
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>data</CODE> - input XML document in generic XML artifact format
<DT><B>Returns:</B><DD>array of generated XML documents compliant to generic XML
         artifact schema</DL>
</DD>
</DL>
<HR>

<A NAME="lookupTargetArtifact(org.dom4j.Element, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)"><!-- --></A><H3>
lookupTargetArtifact</H3>
<PRE>
private java.lang.Object[] <B>lookupTargetArtifact</B>(org.dom4j.Element&nbsp;element,
                                                java.lang.String&nbsp;sourceArtifactId,
                                                java.lang.String&nbsp;sourceSystemId,
                                                java.lang.String&nbsp;sourceRepositoryId,
                                                java.lang.String&nbsp;targetSystemId,
                                                java.lang.String&nbsp;targetRepositoryId,
                                                java.lang.String&nbsp;artifactType)</PRE>
<DL>
<DD>For a given source artifact id, source repository and the target
 repository details, this method finds out the target artifact id mapped
 to the source artifact id by looking up the identity mapping table.
 
 If the source artifact id had ever passed through the wiring the identity
 mapping will contain the corresponding target artifact id. This method
 fetches the target artifact id and returns. If there is no target
 artifact id mapped to this source artifact id this method return a null.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sourceArtifactId</CODE> - -
            The source artifact id that should be looked up for a target
            artifact id<DD><CODE>sourceSystemId</CODE> - -
            The system id of the source repository<DD><CODE>sourceRepositoryId</CODE> - -
            The repository id of the source artifact<DD><CODE>targetSystemId</CODE> - -
            The system id of the target repository<DD><CODE>targetRepositoryId</CODE> - -
            The repository id of the target artifact<DD><CODE>artifactType</CODE> - -
            The artifact type
<DT><B>Returns:</B><DD>array with target artifactId, sourceArtifactLastModifiedDate,
         sourceArtifactVersion, targetArtifactVersion (in this order)</DL>
</DD>
</DL>
<HR>

<A NAME="skipQuarantinedArtifact(org.dom4j.Element, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.util.Date, int)"><!-- --></A><H3>
skipQuarantinedArtifact</H3>
<PRE>
private boolean <B>skipQuarantinedArtifact</B>(org.dom4j.Element&nbsp;element,
                                        java.lang.String&nbsp;sourceArtifactId,
                                        java.lang.String&nbsp;sourceSystemId,
                                        java.lang.String&nbsp;sourceRepositoryId,
                                        java.lang.String&nbsp;targetSystemId,
                                        java.lang.String&nbsp;targetRepositoryId,
                                        java.lang.String&nbsp;artifactType,
                                        java.util.Date&nbsp;sourceArtifactLastModifiedDate,
                                        int&nbsp;sourceArtifactVersionInt)</PRE>
<DL>
<DD>This method looks up whether the artifact has been quarantined in the
 hospital and has not been reprocessed yet. If so, it will find out
 whether to skip the artifact or not.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>sourceArtifactId</CODE> - -
            The source artifact id that should be looked up for a target
            artifact id<DD><CODE>sourceSystemId</CODE> - -
            The system id of the source repository<DD><CODE>sourceRepositoryId</CODE> - -
            The repository id of the source artifact<DD><CODE>targetSystemId</CODE> - -
            The system id of the target repository<DD><CODE>targetRepositoryId</CODE> - -
            The repository id of the target artifact<DD><CODE>artifactType</CODE> - -
            The artifact type<DD><CODE>sourceArtifactVersionInt</CODE> - version of the current artifact<DD><CODE>sourceArtifactLastModifiedDate</CODE> - last modified date of the current artifact
<DT><B>Returns:</B><DD>true if artifact should be skipped, false if not</DL>
</DD>
</DL>
<HR>

<A NAME="reset(java.lang.Object)"><!-- --></A><H3>
reset</H3>
<PRE>
public void <B>reset</B>(java.lang.Object&nbsp;context)</PRE>
<DL>
<DD>Reset the processor
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>reset</CODE> in interface <CODE>org.openadaptor.core.IDataProcessor</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="validate(java.util.List)"><!-- --></A><H3>
validate</H3>
<PRE>
public void <B>validate</B>(java.util.List&nbsp;exceptions)</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>validate</CODE> in interface <CODE>org.openadaptor.core.IDataProcessor</CODE><DT><B>Specified by:</B><DD><CODE>validate</CODE> in interface <CODE>org.openadaptor.core.lifecycle.ILifecycleComponent</CODE><DT><B>Overrides:</B><DD><CODE>validate</CODE> in class <CODE>org.openadaptor.core.lifecycle.LifecycleComponent</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getIdentityMappingDatabaseReader()"><!-- --></A><H3>
getIdentityMappingDatabaseReader</H3>
<PRE>
public org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector <B>getIdentityMappingDatabaseReader</B>()</PRE>
<DL>
<DD>Gets the (mandatory) data base reader that is used to retrieve the target
 artifact id from the the identity mapping table. If the artifact has been
 already mapped to a target artifact this information will be inserted. If
 the processed artifact has been already mapped in a newer or equal
 version the duplicate shipment detection algorithm will skip the
 artifact.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>identityMappingDatabaseReader</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="setIdentityMappingDatabaseReader(org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector)"><!-- --></A><H3>
setIdentityMappingDatabaseReader</H3>
<PRE>
public void <B>setIdentityMappingDatabaseReader</B>(org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector&nbsp;identityMappingDatabaseReader)</PRE>
<DL>
<DD>Sets the (mandatory) data base reader that is used to retrieve the target
 artifact id from the the identity mapping table. If the artifact has been
 already mapped to a target artifact this information will be inserted. If
 the processed artifact has been already mapped in a newer or equal
 version the duplicate shipment detection algorithm will skip the
 artifact.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>identityMappingDatabaseReader</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="getHospitalDatabaseReader()"><!-- --></A><H3>
getHospitalDatabaseReader</H3>
<PRE>
public org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector <B>getHospitalDatabaseReader</B>()</PRE>
<DL>
<DD>Gets the (optional) data base reader that is used to find out whether the
 artifact is currently quarantined in the hospital and has not been
 reprocessed yet. If this property is not set, no lookup will be done in
 the hospital. If the artifact is in the hospital its version in the
 hospital will be compared with the current version. If the current
 artifact version is less or equal to the quarantined artifact, no
 artifact will be shipped. Otherwise the
 skipNewerVersionsOfQuarantinedArtifacts property will determine whether
 to skip newer versions as well.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD></DL>
</DD>
</DL>
<HR>

<A NAME="setHospitalDatabaseReader(org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector)"><!-- --></A><H3>
setHospitalDatabaseReader</H3>
<PRE>
public void <B>setHospitalDatabaseReader</B>(org.openadaptor.auxil.connector.jdbc.reader.JDBCReadConnector&nbsp;hospitalDatabaseReader)</PRE>
<DL>
<DD>Sets the (optional) data base reader that is used to find out whether the
 artifact is currently quarantined in the hospital and has not been
 reprocessed yet. If this property is not set, no lookup will be done in
 the hospital. If the artifact is in the hospital its version in the
 hospital will be compared with the current version. If the current
 artifact version is less or equal to the quarantined artifact, no
 artifact will be shipped. Otherwise the
 skipNewerVersionsOfQuarantinedArtifacts property will determine whether
 to skip newer versions as well.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>hospitalDatabaseReader</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="setSkipNewerVersionsOfQuarantinedArtifacts(boolean)"><!-- --></A><H3>
setSkipNewerVersionsOfQuarantinedArtifacts</H3>
<PRE>
public void <B>setSkipNewerVersionsOfQuarantinedArtifacts</B>(boolean&nbsp;skipNewerVersionsOfQuarantinedAttachments)</PRE>
<DL>
<DD>This optional property (default value false) determines whether
 non-reprocessed artifacts in the hospital should be skipped even if a
 newer version of the artifact is available in the source system.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>skipNewerVersionsOfQuarantinedAttachments</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="isSkipNewerVersionsOfQuarantinedArtifacts()"><!-- --></A><H3>
isSkipNewerVersionsOfQuarantinedArtifacts</H3>
<PRE>
public boolean <B>isSkipNewerVersionsOfQuarantinedArtifacts</B>()</PRE>
<DL>
<DD>This optional property (default value false) determines whether
 non-reprocessed artifacts in the hospital should be skipped even if a
 newer version of the artifact is available in the source system.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>skipNewerVersionsOfQuarantinedAttachments</CODE> - </DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/EntityService.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/collabnet/ccf/core/CCFRuntimeException.html" title="class in com.collabnet.ccf.core"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/collabnet/ccf/core/RepositoryRecord.html" title="class in com.collabnet.ccf.core"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/collabnet/ccf/core/EntityService.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="EntityService.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
